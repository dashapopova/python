
Данные для графов

[Тут можно найти](http://konect.uni-koblenz.de/) можно найти большую разнообразную коллекцию готовых сетей, с которыми можно поиграть. Например, здесь лежат результаты наблюдений за дельфинами в Новой Зеландии (классический граф) — 64 узла (дельфины), 159 связей (если дельфинов часто наблюдали вместе).

Загрузим эти данные и посмотрим, что можно с ними сделать.

```import urllib.request
import tarfile

response = urllib.request.urlopen('http://konect.uni-koblenz.de/downloads/tsv/dolphins.tar.bz2')
zipped = response.read()

with open('dolphins.tar.bz2', 'wb') as f:
    f.write(zipped)
```  


В архиве папка dolphins, а в ней 3 файла:

    out.dolphins
    meta.dolphins
    README.dolphins

Нужные нам данные лежат в первом из них. Они представляют собой набор строк, в каждой 2 числа — id дельфинов, которых наблюдали вместе.

```# распаковываем архив
tar = tarfile.open("dolphins.tar.bz2")
tar.extractall()
tar.close()

dolphin_G = nx.Graph()

# добавляем узлы и связи в граф
with open('dolphins/out.dolphins') as unzipped:
    for indx, line in enumerate(unzipped):
        if indx:
            line = line.strip()
            node_1, node2 = line.split()
            dolphin_G.add_edge(node_1, node2)

# У этого графа кластерный коэффициент будет уже другим:
print(nx.transitivity(dolphin_G))
0.3087757313109426

# Какой дельфин самый главный в Новой Зеландии? :)

deg_dolphin = nx.degree_centrality(dolphin_G)
i = 0
for nodeid in sorted(deg_dolphin, key=deg_dolphin.get, reverse=True):
    i += 1
    print(nodeid, round(deg_dolphin[nodeid], 3))
    if i == 10:
        break
```

Теперь нарисуем, возьмёт для разнообразия другой layout. [Вот список](https://networkx.github.io/documentation/latest/reference/drawing.html#layout) всех алгоритмов укладки, которые есть в `networkx`.
```pos = nx.shell_layout(dolphin_G)
nx.draw_networkx_nodes(dolphin_G, pos, node_color='blue', node_size=1) 
nx.draw_networkx_edges(dolphin_G, pos, edge_color='green')
nx.draw_networkx_labels(dolphin_G, pos, font_size=10, font_family='Arial')
plt.axis('off') 
plt.show()

# Из графа можно извлечь подграф, где будут, например, только интересующие нас узлы:

dolphins_sub = ['15', '38', '46']
sub_G = dolphin_G.subgraph(dolphins_sub)
print(sub_G.number_of_nodes())  
```
Там можно найти и другие данные: [сотрудничество джазовых музыкантов друг с другом](http://konect.uni-koblenz.de/networks/arenas-jazz) — 198 узлов (музыканты), 2,742 связи между ними (сотрудничество).  Или [племена Новой Гвинеи](http://konect.uni-koblenz.de/networks/ucidata-gama). И много всего другого. А еще можно скачать граф своих (или чьих-нибудь еще) друзей Вконтакте с помощью [вот этого приложения](https://vk.com/app3861133_4520142). В общем, пространство для экспериментов огромно!"
## Графы и лингвистика
   
Вот тут постоянно попоплняемая библиография работ о применении графов в лингвистике](https://www.cs.upc.edu/~rferrericancho/linguistic_and_cognitive_networks.html), её можно изучить и сделать что-нибудь великое. Но начнём с простого.

## Задание

Давайте возьмём некоторый большой текст (например, [такой](http://www.adventist.kz/download/education/gom/_plungyan_v.a._-_obstchaya_morfologiya.rar), только не забудьте пересохранить его как plain text), выделим в нём существительные, приведём их к словарной форме и построим граф, в котором все существительные будут связаны между собой в том случае, если они встречались в тексте на расстоянии 3 (или меньше) друг от друга больше 2 раз.

То есть в тексте

*Произвольность знака, по поводу которой мы выше допускали теоретическую возможность перемены. Углубляясь в вопрос, мы усматриваем, что в действительности самая произвольность знака защищает язык от всякой попытки, направленной к его изменению. Говорящая масса, будь она даже сознательнее, не могла бы обсуждать вопросы языка. Ведь для того чтобы подвергать обсуждению какую-либо вещь, надо, чтобы она отвечала какой-то разумной норме*.

найдутся существительные *произвольность, знак, повод, возможность, перемена, вопрос, действительность, произвольность, знак, язык, попытка, изменение, масса, вопрос, язык, обсуждение, вещь, норма*.

На расстоянии 3 от слова *повод* находятся слова *произвольность, знак, возможность, перемена, вопрос*.

Теперь давайте узнаем самые центральные существительные в этом графе, его диаметр (можно узнать только если граф связанный), плотность, ассортативность, кластерный коэффициент. Ну и, конечно, нарисуем то, что у нас получилось.
    
    
